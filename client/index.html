<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1"
    />
    
    <!-- Preload de fuentes críticas -->
    <link rel="preload" as="font" href="/fonts/quicksand-regular.woff2" type="font/woff2" crossorigin>
    <link rel="preload" as="font" href="/fonts/pacifico-regular.woff2" type="font/woff2" crossorigin>
    
    <!-- Preload de imagen LCP -->
    <link rel="preload" as="image" href="/assets/img/placeholder-4x5.avif" fetchpriority="high">
    
    <!-- Usar WebP optimizado en lugar de PNG -->
    <link rel="icon" type="image/webp" href="/logo.webp" />
    <link rel="apple-touch-icon" href="/logo.webp" />
    <title>GrayAmigurumis</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Amigurumis únicos tejidos a mano en Punta Arenas, Chile. Personajes, animales y accesorios personalizados hechos con amor y dedicación. Pedidos personalizados disponibles." />
    <meta name="keywords" content="amigurumis, crochet, tejido a mano, Punta Arenas, Chile, artesanía, peluches tejidos, regalos personalizados, amigurumi personalizado" />
    <meta name="author" content="GrayAmigurumis" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="GrayAmigurumis - Creaciones Tejidas a Mano con Amor" />
    <meta property="og:description" content="Amigurumis únicos tejidos a mano en Punta Arenas, Chile. Cada creación es única, hecha con dedicación y pensada para esa persona especial." />
    <meta property="og:image" content="https://scontent-dfw5-3.cdninstagram.com/v/t51.2885-15/559367774_2652763835076944_5348790701336978053_n.jpg" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:title" content="GrayAmigurumis - Creaciones Tejidas a Mano con Amor" />
    <meta property="twitter:description" content="Amigurumis únicos tejidos a mano en Punta Arenas, Chile." />
    
    <!-- Geo Tags -->
    <meta name="geo.region" content="CL-MA" />
    <meta name="geo.placename" content="Punta Arenas" />
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#f5a9b8" />
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script type="module">
      const logo =
        import.meta.env.VITE_APP_LOGO ??
        "/logo.webp";
      const title =
        import.meta.env.VITE_APP_TITLE ??
        "GrayAmigurumis";

      const favicon = document.querySelector<HTMLLinkElement>('link[rel="icon"]');
      if (favicon) {
        favicon.href = logo;
      }

      const appleIcon = document.querySelector<HTMLLinkElement>('link[rel="apple-touch-icon"]');
      if (appleIcon) {
        appleIcon.href = logo;
      }

      if (document.title !== title) {
        document.title = title;
      }

      const analyticsEndpoint = import.meta.env.VITE_ANALYTICS_ENDPOINT;
      const analyticsWebsiteId = import.meta.env.VITE_ANALYTICS_WEBSITE_ID;

      if (analyticsEndpoint && analyticsWebsiteId) {
        const script = document.createElement("script");
        script.defer = true;
        script.src = `${analyticsEndpoint.replace(/\/$/, "")}/umami`;
        script.dataset.websiteId = analyticsWebsiteId;
        document.body.appendChild(script);
      }
    </script>
  </body>
</html>
